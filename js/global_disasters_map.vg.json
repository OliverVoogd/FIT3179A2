{
	"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
	"width": 800,
	"height": 500,
	"title": "World Map of Natural Disasters 1980-2018",
	"params": [
		{
			"name": "Year",
			"value": 2018,
			"bind": {"input": "range", "min": 1980, "max": 2018, "step": 1}
		}
	],
	"data": {
		"url": "https://raw.githubusercontent.com/OliverVoogd/FIT3179A2/master/data/pend-gdis-1960-2018-disasterlocations.csv"
	},
	"view": {"fill": "#8fb5ca"},
	"vconcat": [
		{
			"width": 922,
			"height": 522,
			"projection": {"type": "equalEarth"},
			 "layer": [
				{
					"data": {
						"url": "https://raw.githubusercontent.com/OliverVoogd/FIT3179A2/master/data/countries.topo.json",
						"format": {"type":"topojson", "feature":"ne_50m_admin_0_countries"}
					},
					"mark": {"type":"geoshape", "fill": "lightgray", "stroke": "darkgray"}
				},
				{
					"transform": [
						{"filter": "datum.year <= Year"}
					],
					"mark": {
						"type": "circle",
						"size": 10
					},
					"encoding": {
						"longitude": {"field": "longitude", "type": "quantitative"},
						"latitude": {"field": "latitude", "type": "quantitative"},
						"color": {
							"field": "disastertype",
							"type": "nominal",
							"scale": {"scheme": "dark2"},
							"condition": {
								"test": "datum.year >= Year",
								"value": "grey"
							}
						},
						"tooltip": [
							{"field": "disastertype", "type": "nominal", "title": "Disaster"},
							{"field": "country", "type": "nominal", "title": "Country"},
							{"field": "location", "type": "nominal", "title": "Location"},
							{"field": "year", "type": "temporal", "title": "Year"}
						] 
					}
				}
			] 
		},
		{
			"data": {
				"url": "https://raw.githubusercontent.com/OliverVoogd/FIT3179A2/master/data/summed_disastertype_year.csv"
			}
			"width": 922,
			"mark": "line",
			"encoding": {
				"color": {"field": "disastertype"},
				"x": {"field": "year", "type": "temporal"},
				"y": {"field": "count", "type": "quantitative"}
			}
		}
	]
}