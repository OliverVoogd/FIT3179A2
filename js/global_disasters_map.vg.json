{
	"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
	"data": {
		"url": "https://raw.githubusercontent.com/OliverVoogd/FIT3179A2/master/data/emdat_trimmed_joined_sedac.csv"
	},
	"params": [
		{
			"name": "CountrySelect",
			"value": ["Australia", "England", "Japan", "China", "India"]
		},
		{
			"name": "YearSelect",
			"value": 2018,
			"bind": {
				"name": "Year Filter ",
				"input": "range",
				"min": 1980,
				"max": 2018,
				"step": 1
			}
		}
	],
	"title": "World Map of Natural Disasters 1980-2018",
	"width": 1200,
	"height": 512,
	"view": {"fill": "#8fb5ca"},
	"projection": {"type": "equalEarth"},
	"layer": [
		{
			"data": {
				"url": "https://raw.githubusercontent.com/OliverVoogd/FIT3179A2/master/data/countries.topo.json",
				"format": {"type":"topojson", "feature":"ne_50m_admin_0_countries"}
			},
			"mark": {"type":"geoshape", "fill": "lightgray", "stroke": "darkgray"}
		},
		{
			"transform": [
				{"filter": "datum.year <= YearSelect"}
			],
			"mark": {
				"type": "circle",
				"opacity": 0.8,
				"stroke": "black",
				"strokeWidth": 0.2,
				"size": 15
			},
			"params": [
				{
					"name": "DisasterTypeSelect",
					"select": {"type": "point", "fields": ["disastertype"]},
					"bind": "legend"
				}
			],
			"encoding": {
				"longitude": {"field": "longitude", "type": "quantitative"},
				"latitude": {"field": "latitude", "type": "quantitative"},
				"color": {
					"field": "disastertype",
					"type": "nominal",
					"scale": {"range": ["#8dd3c7", "#ffff99", "#bebada", "#fb8072", "#80b1d3"]},
					"legend": {
						"title": "Disaster Type"
					}
				},
				"opacity": {
					"condition": {"param": "DisasterTypeSelect", "value": 0.8},
					"value": 0.1
				},
				"tooltip": [
					{"field": "disastertype", "type": "nominal", "title": "Disaster"},
					{"field": "country", "type": "nominal", "title": "Country"},
					{"field": "location", "type": "nominal", "title": "Location"},
					{"field": "year", "type": "nominal", "title": "Year"}
				] 
			}
		}
	] 
}